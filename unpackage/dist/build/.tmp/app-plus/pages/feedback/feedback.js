(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/feedback/feedback"],{"50c9":function(e,t,o){"use strict";var a=o("91e9"),n=o.n(a);n.a},"52b4":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},n=[];o.d(t,"a",function(){return a}),o.d(t,"b",function(){return n})},"91e9":function(e,t,o){},b9cc:function(e,t,o){"use strict";o.r(t);var a=o("52b4"),n=o("ef0c");for(var s in n)"default"!==s&&function(e){o.d(t,e,function(){return n[e]})}(s);o("50c9");var c=o("2877"),i=Object(c["a"])(n["default"],a["a"],a["b"],!1,null,"352a8c20",null);t["default"]=i.exports},ef0c:function(e,t,o){"use strict";o.r(t);var a=o("fb48"),n=o.n(a);for(var s in a)"default"!==s&&function(e){o.d(t,e,function(){return a[e]})}(s);t["default"]=n.a},fb48:function(e,t,o){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{message:"",username:"",phone:"",photos:[],isClick:0}},onLoad:function(){var t=this;t.$access_token=e.getStorageSync("access_token"),t.$level=e.getStorageSync("level"),e.request({url:t.$api+"user/extension&access_token="+t.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){t.username=e.data.data.user_info.nickname,t.phone=e.data.data.user_info.mobile,console.log(o(t.username,t.phone," at pages\\feedback\\feedback.vue:66"))}})},methods:{getMessage:function(e){this.message=e.detail.value},getUsername:function(e){this.username=e.detail.value},getPhone:function(e){this.phone=e.detail.value},formSubmit:function(t){var a=this;return 1!=a.isClick&&(""==a.message?(e.showToast({title:"请填写问题！",icon:"none",duration:1500}),!1):""==a.username?(e.showToast({title:"请填写称呼！",icon:"none",duration:1500}),!1):""==a.phone?(e.showToast({title:"请填写联系方式！",icon:"none",duration:1500}),!1):(console.log(o(a.photos," at pages\\feedback\\feedback.vue:109")),void e.request({url:a.$api+"default/article-message&access_token="+a.$access_token,data:{cat_id:2,name:a.username,content:a.message,mobile:a.phone,url:a.photos},dataType:"json",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){console.log(o(t," at pages\\feedback\\feedback.vue:125")),e.showToast({title:t.data.msg,icon:"none",duration:1500}),0==t.data.code&&(a.isClick=1,setTimeout(function(){e.navigateBack({delta:1})},1500))},fail:function(t){e.showToast({title:"提交失败",icon:"none",duration:1500})}})))},selectPhoto:function(t){var a=this;e.chooseImage({count:9,sizeType:["original","compressed"],sourceType:["album"],success:function(t){for(var n in console.log(o(t.tempFilePaths," at pages\\feedback\\feedback.vue:156")),e.showLoading({title:"上传中"}),t.tempFilePaths)console.log(o(t.tempFilePaths[n]," at pages\\feedback\\feedback.vue:161")),e.uploadFile({url:a.$api+"default/upload-kefu",filePath:t.tempFilePaths[n],name:"image",success:function(t){var n=JSON.parse(t.data);if(console.log(o(n," at pages\\feedback\\feedback.vue:168")),0==n.code){if(a.photos.length>=9)return e.showToast({title:"最多发布图片9张",icon:"none"}),!1;var s=n.data.url;a.photos.push(s),console.log(o(a.photos," at pages\\feedback\\feedback.vue:179"))}else e.showToast({title:n.msg,icon:"none"})}});e.hideLoading()},fail:function(t){e.showToast({title:t.data.msg,icon:"none"})}})},previewPhoto:function(t){var o=this;e.previewImage({urls:o.photos,current:o.photos[t]})},deletePhoto:function(t){var o=this;e.showModal({title:"提示",content:"确定删除图片？",success:function(e){e.confirm&&o.photos.splice(t,1)}})}}};t.default=a}).call(this,o("6e42")["default"],o("0de9")["default"])}},[["c4e4","common/runtime","common/vendor"]]]);