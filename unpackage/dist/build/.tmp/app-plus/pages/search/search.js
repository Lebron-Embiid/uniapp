(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/search/search"],{"38e1":function(t,e,a){"use strict";a.r(e);var o=a("7a48"),n=a.n(o);for(var i in o)"default"!==i&&function(t){a.d(e,t,function(){return o[t]})}(i);e["default"]=n.a},"3f83":function(t,e,a){"use strict";var o=a("b44e"),n=a.n(o);n.a},"4c14":function(t,e,a){"use strict";a.r(e);var o=a("e403"),n=a("38e1");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("3f83");var s=a("2877"),r=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,"95f247a0",null);e["default"]=r.exports},"65a7":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={name:"uni-load-more",props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},color:{type:String,default:"#777777"},contentText:{type:Object,default:function(){return{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"}}}},data:function(){return{}}};e.default=o},"7a48":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(a("e92c"));function n(t){return t&&t.__esModule?t:{default:t}}var i={data:function(){return{page:1,page_count:1,keyword:"",searchList:[],loadingText:{contentdown:"上拉加载更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"}}},components:{uniLoadMore:o.default},methods:{loadMore:function(){this.getList(2)},back:function(e){var a=this;t.request({url:a.$api+"default/search&keyword="+a.keyword,method:"GET",success:function(t){var e=[];for(var o in t.data.data.list){var n=t.data.data.list;e.push({id:n[o].id,src:n[o].pic_url,title:n[o].name,info:"",price:n[o].price,type:n[o].weight})}a.page_count=t.data.data.page_count,a.searchList=e,console.log(a.searchList)},fail:function(e){t.showToast({icon:"none",title:e.data.msg,duration:2e3})}})},toStoreDetail:function(e){t.navigateTo({url:"/pages/store_detail/store_detail?id="+e})},getKeyword:function(t){this.keyword=t.detail.value},confirm:function(e){var a=this;t.request({url:a.$api+"default/search&keyword="+a.keyword,method:"GET",success:function(t){var e=[];for(var o in t.data.data.list){var n=t.data.data.list;e.push({id:n[o].id,src:n[o].pic_url,title:n[o].name,info:"",price:n[o].price,type:n[o].weight})}a.page_count=t.data.data.page_count,a.searchList=e,console.log(a.searchList)},fail:function(e){t.showToast({icon:"none",title:e.data.msg,duration:2e3})}})}},onLoad:function(e){var a=this;a.$access_token=t.getStorageSync("access_token"),a.$level=t.getStorageSync("level")},onPullDownRefresh:function(){var e=this;e.page=1,e.page_count=1,e.$access_token=t.getStorageSync("access_token"),e.$level=t.getStorageSync("level"),t.startPullDownRefresh(),t.showLoading({title:"加载中"}),t.request({url:e.$api+"default/search&keyword="+e.keyword,method:"GET",success:function(a){var o=[];for(var n in a.data.data.list){var i=a.data.data.list;o.push({id:i[n].id,src:i[n].pic_url,title:i[n].name,info:"",price:i[n].price,type:i[n].weight})}e.page_count=a.data.data.page_count,e.searchList=o,t.hideLoading(),t.stopPullDownRefresh(),console.log(e.searchList)},fail:function(e){t.showToast({icon:"none",title:e.data.msg,duration:2e3})}})},onReachBottom:function(){var e=this;if(e.page==e.page_count)return t.showToast({title:"没有更多数据了",icon:"none"}),!1;t.showLoading({title:"加载中"}),e.page=parseInt(e.page)+parseInt(1),t.request({url:e.$api+"default/goods-list&keyword="+e.keyword+"&access_token="+e.$access_token,method:"GET",data:{page:e.page},success:function(a){var o=[];for(var n in a.data.data.list){var i=a.data.data.list;o.push({id:i[n].id,src:i[n].pic_url,title:i[n].name,info:"",price:i[n].price,type:i[n].weight})}e.searchList=e.searchList.concat(o),console.log(e.searchList),t.hideLoading()},fail:function(e){t.showToast({icon:"none",title:e.data.msg,duration:2e3})}})}};e.default=i}).call(this,a("6e42")["default"])},"830c":function(t,e,a){"use strict";a.r(e);var o=a("65a7"),n=a.n(o);for(var i in o)"default"!==i&&function(t){a.d(e,t,function(){return o[t]})}(i);e["default"]=n.a},a5d1:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"uni-load-more"},[a("view",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.status&&t.showIcon,expression:"status === 'loading' && showIcon"}],staticClass:"uni-load-more__img"},[a("view",{staticClass:"load1"},[a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}})]),a("view",{staticClass:"load2"},[a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}})]),a("view",{staticClass:"load3"},[a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}})])]),a("text",{staticClass:"uni-load-more__text",style:{color:t.color}},[t._v(t._s("more"===t.status?t.contentText.contentdown:"loading"===t.status?t.contentText.contentrefresh:t.contentText.contentnomore))])])},n=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return n})},ad7a:function(t,e,a){},b44e:function(t,e,a){},b8ff:function(t,e,a){"use strict";var o=a("ad7a"),n=a.n(o);n.a},e403:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"search_box"},[t._m(0),a("view",{staticClass:"search_form"},[a("view",[a("image",{attrs:{src:"../../static/search.png",mode:"widthFix"}}),a("input",{attrs:{type:"text",placeholder:"请输入搜索内容",value:t.keyword,eventid:"eb6238ea-0"},on:{blur:t.confirm,input:t.getKeyword}})]),a("button",{attrs:{eventid:"eb6238ea-1"},on:{click:t.back}},[t._v("搜索")])],1),a("view",{staticClass:"search_content"},t._l(t.searchList,function(e,o){return a("view",{key:o,staticClass:"search_item",attrs:{eventid:"eb6238ea-2-"+o},on:{click:function(a){t.toStoreDetail(e.id)}}},[a("image",{attrs:{src:e.src,mode:"widthFix"}}),a("view",{staticClass:"si_title"},[t._v(t._s(e.title))]),a("view",{staticClass:"si_info"},[t._v(t._s(e.info))]),a("view",{staticClass:"si_price"},[t._v("￥"+t._s(e.price)),a("text",[t._v("规格："+t._s(e.type))])])])}))])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"status_bar"},[a("view",{staticClass:"top_view"})])}];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return n})},e92c:function(t,e,a){"use strict";a.r(e);var o=a("a5d1"),n=a("830c");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("b8ff");var s=a("2877"),r=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,null,null);e["default"]=r.exports},f29b:function(t,e,a){"use strict";a("1a7f");var o=i(a("b0ce")),n=i(a("4c14"));function i(t){return t&&t.__esModule?t:{default:t}}Page((0,o.default)(n.default))}},[["f29b","common/runtime","common/vendor"]]]);