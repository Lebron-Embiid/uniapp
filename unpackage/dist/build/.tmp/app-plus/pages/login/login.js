(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"379f":function(e,a,n){"use strict";var t=n("e9ec"),o=n.n(t);o.a},"7c29":function(e,a,n){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n={onLoad:function(){},data:function(){return{phoneno:"",password:""}},methods:{bindLogin:function(){var a=this;11==a.phoneno.length?e.request({url:a.$api+"passport/mobile-login",data:{contact_way:a.phoneno,password:a.password},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(n){if(1!=n.data.code)e.showToast({title:n.data.data.msg,icon:"none"});else{var t=n.data.data.access_token;console.log(n," at pages\\login\\login.vue:69"),0==n.data.data.is_wx?e.login({provider:"weixin",success:function(n){e.getUserInfo({provider:"weixin",success:function(n){""==n.userInfo.nickName&&(n.userInfo.nickName=a.phoneno),""==n.userInfo.openId&&(n.userInfo.openId=a.phoneno),""==n.userInfo.avatarUrl&&(n.userInfo.avatarUrl="/web/statics/images/avatar.png"),e.request({url:a.$api+"user/agent-information&access_token="+t,dataType:"json",method:"POST",data:{nickname:n.userInfo.nickName,wechat_open_id:n.userInfo.openId,avatar_url:n.userInfo.avatarUrl},header:{"content-type":"application/x-www-form-urlencoded"},success:function(n){n.data.data;a.is_wx=1,e.showToast({title:n.data.msg,icon:"none"}),e.clearStorageSync(),e.setStorageSync("user_name",n.data.data.user_name),e.setStorageSync("access_token",n.data.data.access_token),e.setStorageSync("level",n.data.data.level),a.$access_token=e.getStorageSync("access_token"),a.$level=e.getStorageSync("level"),a.$user_name=e.getStorageSync("user_name"),console.log(a.$access_token," at pages\\login\\login.vue:114"),console.log(a.$level," at pages\\login\\login.vue:115"),console.log(a.$user_name," at pages\\login\\login.vue:116"),""==n.data.data.user_name?setTimeout(function(){e.redirectTo({url:"/pages/complete_mater/complete_mater"})},1500):setTimeout(function(){e.reLaunch({url:"/pages/index/index"})},1500)}})}})},fail:function(a){e.showToast({title:"授权登录失败",icon:"none",duration:1500})}}):(e.clearStorageSync(),e.setStorageSync("user_name",n.data.data.user_name),e.setStorageSync("access_token",n.data.data.access_token),e.setStorageSync("level",n.data.data.level),e.showToast({title:n.data.data.msg,icon:"none",duration:1500}),a.$access_token=e.getStorageSync("access_token"),a.$level=e.getStorageSync("level"),a.$user_name=e.getStorageSync("user_name"),console.log(a.$access_token," at pages\\login\\login.vue:159"),console.log(a.$level," at pages\\login\\login.vue:160"),console.log(a.$user_name," at pages\\login\\login.vue:161"),""==n.data.data.user_name?setTimeout(function(){e.redirectTo({url:"/pages/complete_mater/complete_mater"})},1500):setTimeout(function(){e.reLaunch({url:"/pages/index/index"})},1500))}},fail:function(a){e.showToast({title:a.data.msg,icon:"none"})}}):e.showToast({icon:"none",title:"手机号不正确"})}}};a.default=n}).call(this,n("6e42")["default"])},d1f7:function(e,a,n){"use strict";n.r(a);var t=n("7c29"),o=n.n(t);for(var s in t)"default"!==s&&function(e){n.d(a,e,function(){return t[e]})}(s);a["default"]=o.a},d2bb:function(e,a,n){"use strict";n.r(a);var t=n("d6ee"),o=n("d1f7");for(var s in o)"default"!==s&&function(e){n.d(a,e,function(){return o[e]})}(s);n("379f");var c=n("2877"),r=Object(c["a"])(o["default"],t["a"],t["b"],!1,null,null,null);a["default"]=r.exports},d6ee:function(e,a,n){"use strict";var t=function(){var e=this,a=e.$createElement;e._self._c},o=[];n.d(a,"a",function(){return t}),n.d(a,"b",function(){return o})},e9ec:function(e,a,n){}},[["b061","common/runtime","common/vendor"]]]);