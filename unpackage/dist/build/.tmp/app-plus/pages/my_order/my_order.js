(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my_order/my_order"],{"00cc":function(e,t,a){},"1a9c":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("view",{staticClass:"order_box"},[e.orderList.length>0?a("block",e._l(e.orderList,function(t,n){return a("view",{key:n,staticClass:"order_item"},[a("view",{staticClass:"order_top"},[a("view",[e._v("订单号："+e._s(t.order_no))]),a("view",[a("image",{attrs:{src:"../../static/clock.png",mode:"widthFix"}}),e._v(e._s(t.time))])]),e._l(t.goods,function(o,i){return a("view",{key:i,staticClass:"order_info",attrs:{eventid:"5307c26c-0-"+n+"-"+i},on:{click:function(a){e.toOrderDetail(t.id)}}},[a("view",{staticClass:"oi_left"},[a("image",{attrs:{src:o.goods_pic,mode:"widthFix"}})]),a("view",{staticClass:"oi_center"},[a("view",{staticClass:"oi_title"},[e._v(e._s(o.goods_name))]),a("view",{staticClass:"oi_info"},e._l(o.attr_list,function(t,n){return a("text",{key:n},[e._v(e._s(t.attr_group_name)+": "+e._s(t.attr_name))])}))]),a("view",{staticClass:"oi_right"},[a("view",{staticClass:"oi_price"},[e._v("￥"+e._s(o.price))]),a("view",{staticClass:"oi_num"},[e._v("x"+e._s(o.num))])])])}),a("view",{staticClass:"order_bottom"},[a("view",{staticClass:"ob_price"},[a("view",[e._v("商品实付："),a("text",[e._v("￥"+e._s(t.pay))])])]),a("view",{staticClass:"ob_btn"},[0==t.is_pay&&0==e.current?a("block",[a("button",{attrs:{eventid:"5307c26c-1-"+n},on:{click:function(a){e.toCancle(t.id)}}},[e._v("取消订单")]),a("button",{attrs:{eventid:"5307c26c-2-"+n},on:{click:function(a){e.toPay(t.id,t.pay,n)}}},[e._v("去支付")])],1):e._e(),1==t.is_pay&&1==e.current?a("block",[a("button",{attrs:{eventid:"5307c26c-3-"+n},on:{click:function(a){e.toContact(t.id)}}},[e._v("联系客服")])],1):e._e(),1==t.is_send&&2==e.current?a("block",[""!=t.express?a("block",[a("button",{attrs:{eventid:"5307c26c-4-"+n},on:{click:function(a){e.logisticsOrder(t.id)}}},[e._v("查看物流")])],1):e._e(),a("button",{attrs:{eventid:"5307c26c-5-"+n},on:{click:function(a){e.queryOrder(t.id)}}},[e._v("确认收货")])],1):e._e(),0==t.is_comment&&3==e.current?a("block",[a("button",{attrs:{eventid:"5307c26c-6-"+n},on:{click:function(a){e.toOrderComment(t.id)}}},[e._v("评价")])],1):e._e()],1)])],2)})):a("block",[a("view",{staticClass:"not_have"},[e._v("暂无相关订单")])])],1)},o=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return o})},"233c":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a("7bdf"));function o(e){return e&&e.__esModule?e:{default:e}}var i={data:function(){return{page0:1,page_count0:1,page1:1,page_count1:1,page2:1,page_coun2:1,page3:1,page_coun3:1,navbar:[{name:"待付款"},{name:"待发货"},{name:"待收货"},{name:"已完成"}],currentTab:0,orderList:[]}},components:{commonOrder:n.default},onBackPress:function(){e.reLaunch({url:"/pages/person/person"})},methods:{navbarTap:function(t){var a=this;a.currentTab=t,a.page0=1,a.page1=1,a.page2=1,a.page3=1,e.startPullDownRefresh(),e.request({url:a.$api+"order/list&status="+a.currentTab+"&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){var t=[],n=e.data.data;for(var o in n.list)t.push({id:n.list[o].order_id,express:n.list[o].express,order_no:n.list[o].order_no,time:n.list[o].addtime,status:!n.list[o].pay_type,goods:n.list[o].goods_list,pay:n.list[o].pay_price,is_pay:n.list[o].is_pay,is_send:n.list[o].is_send,is_confirm:n.list[o].is_confirm,is_comment:n.list[o].is_comment,apply_delete:n.list[o].apply_delete});0==a.currentTab?a.page_count0=e.data.data.page_count:1==a.currentTab?a.page_count1=e.data.data.page_count:2==a.currentTab?a.page_count2=e.data.data.page_count:3==a.currentTab&&(a.page_count3=e.data.data.page_count),a.orderList=t},fail:function(){}})}},onLoad:function(t){var a=this;a.$access_token=e.getStorageSync("access_token"),a.$level=e.getStorageSync("level"),a.currentTab=parseInt(t.id),e.request({url:a.$api+"order/list&status="+t.id+"&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){var t=[],n=e.data.data;for(var o in n.list)t.push({id:n.list[o].order_id,express:n.list[o].express,order_no:n.list[o].order_no,time:n.list[o].addtime,status:!n.list[o].pay_type,goods:n.list[o].goods_list,pay:n.list[o].pay_price,is_pay:n.list[o].is_pay,is_send:n.list[o].is_send,is_confirm:n.list[o].is_confirm,is_comment:n.list[o].is_comment,apply_delete:n.list[o].apply_delete});a.page_count0=e.data.data.page_count,a.orderList=t},fail:function(){}}),e.startPullDownRefresh()},onPullDownRefresh:function(){var t=this;t.page0=1,t.page1=1,t.page2=1,t.page3=1,setTimeout(function(){e.request({url:t.$api+"order/list&status="+t.currentTab+"&access_token="+t.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){var a=[],n=e.data.data;for(var o in n.list)a.push({id:n.list[o].order_id,express:n.list[o].express,order_no:n.list[o].order_no,time:n.list[o].addtime,status:!n.list[o].pay_type,goods:n.list[o].goods_list,pay:n.list[o].pay_price,is_pay:n.list[o].is_pay,is_send:n.list[o].is_send,is_confirm:n.list[o].is_confirm,is_comment:n.list[o].is_comment,apply_delete:n.list[o].apply_delete});t.page_count0=e.data.data.page_count,t.orderList=a},fail:function(){}}),e.stopPullDownRefresh()},1e3)},onReachBottom:function(){var t=this;if(0==t.currentTab){if(t.page0==t.page_count0)return e.showToast({title:"没有更多数据了",icon:"none"}),!1;e.showLoading({title:"加载中"}),t.page0=parseInt(t.page0)+parseInt(1);var a=t.page0}else if(1==t.currentTab){if(t.page1==t.page_count1)return e.showToast({title:"没有更多数据了",icon:"none"}),!1;e.showLoading({title:"加载中"}),t.page1=parseInt(t.page1)+parseInt(1);a=t.page1}else if(2==t.currentTab){if(t.page2==t.page_count2)return e.showToast({title:"没有更多数据了",icon:"none"}),!1;e.showLoading({title:"加载中"}),t.page2=parseInt(t.page2)+parseInt(1);a=t.page2}else if(3==t.currentTab){if(t.page3==t.page_count3)return e.showToast({title:"没有更多数据了",icon:"none"}),!1;e.showLoading({title:"加载中"}),t.page3=parseInt(t.page3)+parseInt(1);a=t.page3}e.request({url:t.$api+"order/list&status="+t.currentTab+"&access_token="+t.$access_token,method:"GET",dataType:"json",data:{page:a},header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){var n=[],o=a.data.data;for(var i in o.list)n.push({id:o.list[i].order_id,order_no:o.list[i].order_no,time:o.list[i].addtime,status:!o.list[i].pay_type,goods:o.list[i].goods_list,pay:o.list[i].pay_price,is_pay:o.list[i].is_pay,is_send:o.list[i].is_send,is_confirm:o.list[i].is_confirm,is_comment:o.list[i].is_comment,apply_delete:o.list[i].apply_delete});t.orderList=t.orderList.concat(n),console.log(t.orderList),e.hideLoading()},fail:function(t){e.showToast({icon:"none",title:t.data.msg,duration:2e3})}})}};t.default=i}).call(this,a("6e42")["default"])},"34b5":function(e,t,a){"use strict";a.r(t);var n=a("5eab"),o=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);t["default"]=o.a},"5eab":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{pay_type:"-1",pay_list:["微信支付","支付宝支付"]}},props:{current:Number,orderList:Array},onLoad:function(){var t=this;t.$access_token=e.getStorageSync("access_token"),t.$level=e.getStorageSync("level")},methods:{toPay:function(t,a,n){var o=this;console.log(o.pay_type);var i=o.orderList[n].order_no,s=o.orderList[n].goods[0].goods_name,r=o.orderList[n].id;if(console.log(t,i,s,a,r),a>=1e4)return e.showToast({title:"联系平台下单",icon:"none"}),!1;e.showActionSheet({itemList:o.pay_list,success:function(t){if(0==t.tapIndex){o.pay_type=0;var n="http://app.youlan-china.com/wxpayv3/index.php",c="wxpay"}else{o.pay_type=1;n="http://app.youlan-china.com/alipayrsa2/index.php",c="alipay"}e.request({url:n,method:"GET",dataType:"json",data:{price:a,goods_name:s,order_no:i},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var a=t.data;if(0==o.pay_type)var n=JSON.stringify({appid:a.appid,noncestr:a.noncestr,package:"Sign=WXPay",partnerid:a.partnerid,prepayid:a.prepayid,timestamp:a.timestamp,sign:a.sign});else n=a;e.getProvider({service:"payment",success:function(t){e.requestPayment({provider:c,orderInfo:n,success:function(t){e.showToast({title:"支付成功！"}),e.request({url:o.$api+"order/wx-pay&order_id="+r+"&access_token="+o.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){}}),e.navigateTo({url:"/pages/my_order/my_order?id=1"})},fail:function(t){e.showToast({title:"支付失败",icon:"none"})}})}})},fail:function(t){e.showToast({title:"支付失败！",icon:"none"})}})},fail:function(e){console.log(e.errMsg)}})},toContact:function(t){e.navigateTo({url:"/pages/feedback/feedback"})},toCancle:function(t){var a=this;e.showModal({title:"提示",content:"取消订单等同删除订单，请确定是否取消？",success:function(n){n.confirm&&e.request({url:a.$api+"order/revoke&order_id="+t+"&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){e.showToast({title:t.data.msg,icon:"none"}),setTimeout(function(){e.redirectTo({url:"/pages/my_order/my_order?id="+a.current})},1e3)},fail:function(t){e.showToast({title:t.data.msg,icon:"none"})}})}})},toOrderDetail:function(t){console.log(t),e.navigateTo({url:"/pages/order_detail/order_detail?id="+t})},toOrderComment:function(t){e.navigateTo({url:"/pages/order_comment/order_comment?id="+t})},logisticsOrder:function(t){e.navigateTo({url:"/pages/logistics/logistics?id="+t})},queryOrder:function(t){var a=this;console.log(t),e.request({url:a.$api+"order/confirm&order_id="+t+"&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){e.showToast({title:t.data.msg,icon:"none"}),setTimeout(function(){e.redirectTo({url:"/pages/my_order/my_order?id="+a.current})},1e3)},fail:function(t){e.showToast({title:t.data.msg,icon:"none"})}})}}};t.default=a}).call(this,a("6e42")["default"])},"7bdf":function(e,t,a){"use strict";a.r(t);var n=a("1a9c"),o=a("34b5");for(var i in o)"default"!==i&&function(e){a.d(t,e,function(){return o[e]})}(i);a("ef72");var s=a("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"d4d630c8",null);t["default"]=r.exports},"9c6a":function(e,t,a){"use strict";a.r(t);var n=a("a518"),o=a("c2f1");for(var i in o)"default"!==i&&function(e){a.d(t,e,function(){return o[e]})}(i);a("e222");var s=a("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"2738ab10",null);t["default"]=r.exports},a518:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("view",{staticClass:"my_order_box"},[a("view",{staticClass:"page_bg"}),a("view",{staticClass:"order_nav"},e._l(e.navbar,function(t,n){return a("view",{key:n,class:[e.currentTab==n?"active":""],attrs:{eventid:"221fe5aa-0-"+n},on:{click:function(t){e.navbarTap(n)}}},[e._v(e._s(t.name))])})),a("view",{staticClass:"order_list"},[a("commonOrder",{attrs:{orderList:e.orderList,current:e.currentTab,mpcomid:"221fe5aa-0"}})],1)])},o=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return o})},c2f1:function(e,t,a){"use strict";a.r(t);var n=a("233c"),o=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);t["default"]=o.a},caed:function(e,t,a){"use strict";a("1a7f");var n=i(a("b0ce")),o=i(a("9c6a"));function i(e){return e&&e.__esModule?e:{default:e}}Page((0,n.default)(o.default))},ccef:function(e,t,a){},e222:function(e,t,a){"use strict";var n=a("00cc"),o=a.n(n);o.a},ef72:function(e,t,a){"use strict";var n=a("ccef"),o=a.n(n);o.a}},[["caed","common/runtime","common/vendor"]]]);