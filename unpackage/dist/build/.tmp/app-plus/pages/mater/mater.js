(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mater/mater"],{"5b48":function(t,e,a){"use strict";a.r(e);var o=a("b9b3"),i=a("d4c7");for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);a("e31b");var s=a("2877"),r=Object(s["a"])(i["default"],o["a"],o["b"],!1,null,"6145b540",null);e["default"]=r.exports},9337:function(t,e,a){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){return Promise.all([a.e("common/vendor"),a.e("components/common-video")]).then(a.bind(null,"5238"))},n={data:function(){return{navbar:[{name:"图片"},{name:"视频"}],currentTab:0,photo_list:[],video_list:[],page:1,page_id:1,page_source_count:1,page_movie_count:1,keywords:"",keywords_video:""}},components:{commonVideo:i},methods:{navbarTap:function(e){var a=this;a.currentTab=e,a.page=1,a.page_id=1,a.page_source_count=1,a.page_movie_count=1,t.startPullDownRefresh(),0==a.currentTab?t.request({url:a.$api+"default/source-list&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[],o=t.data.data;for(var i in o.list)e.push({id:o.list[i].id,avatar:o.list[i].avatar_url,name:o.list[i].nickname,title:o.list[i].title,time:o.list[i].addtime,num:o.list[i].read_count,sign:o.list[i].type,maters:o.list[i].cover_pic[0]});a.page_source_count=t.data.data.page_count,a.photo_list=e},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}}):t.request({url:a.$api+"default/movies-list&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[],o=t.data.data.list;t.data.data.page_count;for(var i in o)e.push({id:o[i].id,poster:o[i].cove_pic,avatar:o[i].avatar_url,title:o[i].title,look:o[i].num,video:o[i].url});a.page_movie_count=t.data.data.page_count,a.video_list=e},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}})},toPreviewMater:function(e,a){var o=this,i=[];for(var n in o.photo_list[e].maters)i.push(o.photo_list[e].maters[n].cover_pic);t.previewImage({urls:i,current:i[a],indicator:"number"})},toMaterDetail:function(e){t.navigateTo({url:"/pages/mater_detail/mater_detail?id="+e.id+"&sign="+e.sign})},toSearch:function(e){var a=this;a.page=1,t.request({url:a.$api+"default/source-list&access_token="+a.$access_token,method:"GET",dataType:"json",data:{keyword:a.keywords},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[];console.log(o(222," at pages\\mater\\mater.vue:174"));var i=t.data.data;for(var n in console.log(o(i," at pages\\mater\\mater.vue:176")),i.list)e.push({id:i.list[n].id,avatar:i.list[n].avatar_url,name:i.list[n].nickname,time:i.list[n].addtime,num:i.list[n].read_count,sign:i.list[n].type,maters:i.list[n].cover_pic[0]});a.page_source_count=t.data.data.page_count,a.photo_list=e},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}})},toSearch_video:function(e){var a=this;a.page_id=1,t.request({url:a.$api+"default/movies-list&access_token="+a.$access_token,method:"GET",dataType:"json",data:{keyword:a.keywords_video},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[],o=t.data.data.list;t.data.data.page_count;for(var i in o)e.push({id:o[i].id,poster:o[i].cove_pic,avatar:o[i].avatar_url,title:o[i].title,look:o[i].num,video:o[i].url});a.page_movie_count=t.data.data.page_count,a.video_list=e},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}})}},onNavigationBarButtonTap:function(){0==this.currentTab?t.navigateTo({url:"/pages/release_mater/release_mater"}):t.navigateTo({url:"/pages/release_video/release_video"})},onShow:function(){var e=this;if(e.$user_name=t.getStorageSync("user_name"),""==e.$user_name)return t.showToast({title:"请完善代理商资料！",icon:"none",duration:2e3}),setTimeout(function(){t.navigateTo({url:"/pages/complete_mater/complete_mater"})},2e3),!1},onLoad:function(e){var a=this;a.$access_token=t.getStorageSync("access_token"),a.$level=t.getStorageSync("level"),t.showLoading({title:"加载中"}),t.request({url:a.$api+"default/source-list&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){var i=[],n=e.data.data;for(var s in console.log(o(n," at pages\\mater\\mater.vue:281")),n.list)i.push({id:n.list[s].id,avatar:n.list[s].avatar_url,name:n.list[s].nickname,title:n.list[s].title,time:n.list[s].addtime,num:n.list[s].read_count,sign:n.list[s].type,maters:n.list[s].cover_pic[0]});a.page_source_count=e.data.data.page_count,a.photo_list=i,t.hideLoading()},fail:function(e){t.hideLoading(),t.showToast({title:e.data.msg,icon:"none"})}}),t.startPullDownRefresh()},onPullDownRefresh:function(){var e=this;e.page=1,e.page_id=1,e.keywords="",e.keywords_video="",t.showLoading({title:"加载中"}),setTimeout(function(){0==e.currentTab?t.request({url:e.$api+"default/source-list&access_token="+e.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){var i=[],n=a.data.data;for(var s in console.log(o(n," at pages\\mater\\mater.vue:329")),n.list)i.push({id:n.list[s].id,avatar:n.list[s].avatar_url,name:n.list[s].nickname,title:n.list[s].title,time:n.list[s].addtime,num:n.list[s].read_count,sign:n.list[s].type,maters:n.list[s].cover_pic[0]});e.page_source_count=a.data.data.page_count,e.photo_list=i,t.hideLoading()},fail:function(e){t.hideLoading(),t.showToast({title:e.data.msg,icon:"none"})}}):t.request({url:e.$api+"default/movies-list&access_token="+e.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){var i=[],n=a.data.data.list;a.data.data.page_count;for(var s in n)i.push({id:n[s].id,poster:n[s].cove_pic,avatar:n[s].avatar_url,title:n[s].title,look:n[s].num,video:n[s].url});e.page_movie_count=a.data.data.page_count,e.video_list=i,t.hideLoading(),console.log(o(e.video_list," at pages\\mater\\mater.vue:379"))},fail:function(e){t.hideLoading(),t.showToast({title:e.data.msg,icon:"none"})}}),t.stopPullDownRefresh()},1e3)},onReachBottom:function(){var e=this;if(0==e.currentTab){if(e.page==e.page_source_count)return t.showToast({title:"没有更多数据了",icon:"none"}),!1;t.showLoading({title:"加载中"}),e.page=parseInt(e.page)+parseInt(1),t.request({url:e.$api+"default/source-list&access_token="+e.$access_token,method:"GET",data:{page:e.page,keywords:e.keywords},dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){var o=[];e.page_count=a.data.data.page_count;var i=a.data.data.list;for(var n in i)o.push({id:i[n].id,avatar:i[n].avatar_url,name:i[n].nickname,title:i[n].title,time:i[n].addtime,num:i[n].read_count,sign:i[n].type,maters:i[n].cover_pic[0]});e.photo_list=e.photo_list.concat(o),t.hideLoading()},fail:function(e){t.hideLoading(),t.showToast({title:e.data.msg,icon:"none"})}})}else{if(e.page_id==e.page_movie_count)return t.showToast({title:"没有更多数据了",icon:"none"}),!1;t.showLoading({title:"加载中"}),e.page_id=parseInt(e.page_id)+parseInt(1),t.request({url:e.$api+"default/movies-list&access_token="+e.$access_token,method:"GET",data:{page:e.page_id,keywords:e.keywords_video},dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){var i=[],n=a.data.data.list;a.data.data.page_count;for(var s in n)i.push({id:n[s].id,poster:n[s].cove_pic,avatar:n[s].avatar_url,title:n[s].title,look:n[s].num,video:n[s].url});e.video_list=e.video_list.concat(i),console.log(o(e.video_list," at pages\\mater\\mater.vue:479")),t.hideLoading()},fail:function(e){t.hideLoading(),t.showToast({title:e.data.msg,icon:"none"})}})}}};e.default=n}).call(this,a("6e42")["default"],a("0de9")["default"])},a8ae:function(t,e,a){},b9b3:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return i})},d4c7:function(t,e,a){"use strict";a.r(e);var o=a("9337"),i=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,function(){return o[t]})}(n);e["default"]=i.a},e31b:function(t,e,a){"use strict";var o=a("a8ae"),i=a.n(o);i.a}},[["59ee","common/runtime","common/vendor"]]]);