(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mater/mater"],{"5b48":function(t,e,a){"use strict";a.r(e);var o=a("9f7e"),n=a("d4c7");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("b4a6");var s=a("2877"),r=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,"87071bec",null);e["default"]=r.exports},"890c":function(t,e,a){},9337:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){return a.e("components/common-video").then(a.bind(null,"5238"))},n={data:function(){return{navbar:[{name:"图片"},{name:"视频"}],currentTab:0,photo_list:[],video_list:[],page:1,page_id:1,page_source_count:1,page_movie_count:1,keywords:"",keywords_video:""}},components:{commonVideo:o},methods:{navbarTap:function(e){var a=this;a.currentTab=e,a.page=1,a.page_id=1,a.page_source_count=1,a.page_movie_count=1,t.startPullDownRefresh(),0==a.currentTab?t.request({url:a.$api+"default/source-list&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[],o=t.data.data;for(var n in o.list)e.push({id:o.list[n].id,avatar:o.list[n].avatar_url,name:o.list[n].nickname,title:o.list[n].title,time:o.list[n].addtime,num:o.list[n].read_count,sign:o.list[n].type,maters:o.list[n].cover_pic[0]});a.page_source_count=t.data.data.page_count,a.photo_list=e},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}}):t.request({url:a.$api+"default/movies-list&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[],o=t.data.data.list;t.data.data.page_count;for(var n in o)e.push({id:o[n].id,poster:o[n].cove_pic,avatar:o[n].avatar_url,title:o[n].title,look:o[n].num,video:o[n].url});a.page_movie_count=t.data.data.page_count,a.video_list=e},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}})},toPreviewMater:function(e,a){var o=this,n=[];for(var i in o.photo_list[e].maters)n.push(o.photo_list[e].maters[i].cover_pic);t.previewImage({urls:n,current:n[a],indicator:"number"})},toMaterDetail:function(e){t.navigateTo({url:"/pages/mater_detail/mater_detail?id="+e.id+"&sign="+e.sign})},toSearch:function(e){var a=this;a.page=1,t.request({url:a.$api+"default/source-list&access_token="+a.$access_token,method:"GET",dataType:"json",data:{keyword:a.keywords},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[],o=t.data.data;for(var n in o.list)e.push({id:o.list[n].id,avatar:o.list[n].avatar_url,name:o.list[n].nickname,time:o.list[n].addtime,num:o.list[n].read_count,sign:o.list[n].type,maters:o.list[n].cover_pic[0]});a.page_source_count=t.data.data.page_count,a.photo_list=e},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}})},toSearch_video:function(e){var a=this;a.page_id=1,t.request({url:a.$api+"default/movies-list&access_token="+a.$access_token,method:"GET",dataType:"json",data:{keyword:a.keywords_video},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[],o=t.data.data.list;t.data.data.page_count;for(var n in o)e.push({id:o[n].id,poster:o[n].cove_pic,avatar:o[n].avatar_url,title:o[n].title,look:o[n].num,video:o[n].url});a.page_movie_count=t.data.data.page_count,a.video_list=e},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}})}},onNavigationBarButtonTap:function(){0==this.currentTab?t.navigateTo({url:"/pages/release_mater/release_mater"}):t.navigateTo({url:"/pages/release_video/release_video"})},onShow:function(){var e=this;if(e.$user_name=t.getStorageSync("user_name"),""==e.$user_name)return t.showToast({title:"请完善代理商资料！",icon:"none",duration:2e3}),setTimeout(function(){t.navigateTo({url:"/pages/complete_mater/complete_mater"})},2e3),!1},onLoad:function(e){var a=this;a.$access_token=t.getStorageSync("access_token"),a.$level=t.getStorageSync("level"),setTimeout(function(){t.request({url:a.$api+"default/source-list&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[],o=t.data.data;for(var n in o.list)e.push({id:o.list[n].id,avatar:o.list[n].avatar_url,name:o.list[n].nickname,title:o.list[n].title,time:o.list[n].addtime,num:o.list[n].read_count,sign:o.list[n].type,maters:o.list[n].cover_pic[0]});a.page_source_count=t.data.data.page_count,a.photo_list=e},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}})},1e3),t.startPullDownRefresh()},onPullDownRefresh:function(){var e=this;e.page=1,e.page_id=1,e.keywords="",e.keywords_video="",setTimeout(function(){0==e.currentTab?t.request({url:e.$api+"default/source-list&access_token="+e.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var a=[],o=t.data.data;for(var n in o.list)a.push({id:o.list[n].id,avatar:o.list[n].avatar_url,name:o.list[n].nickname,title:o.list[n].title,time:o.list[n].addtime,num:o.list[n].read_count,sign:o.list[n].type,maters:o.list[n].cover_pic[0]});e.page_source_count=t.data.data.page_count,e.photo_list=a},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}}):t.request({url:e.$api+"default/movies-list&access_token="+e.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var a=[],o=t.data.data.list;t.data.data.page_count;for(var n in o)a.push({id:o[n].id,poster:o[n].cove_pic,avatar:o[n].avatar_url,title:o[n].title,look:o[n].num,video:o[n].url});e.page_movie_count=t.data.data.page_count,e.video_list=a,console.log(e.video_list," at pages\\mater\\mater.vue:366")},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}}),t.stopPullDownRefresh()},1e3)},onReachBottom:function(){var e=this;if(0==e.currentTab){if(e.page==e.page_source_count)return t.showToast({title:"没有更多数据了",icon:"none"}),!1;t.showLoading({title:"加载中"}),e.page=parseInt(e.page)+parseInt(1),t.request({url:e.$api+"default/source-list&access_token="+e.$access_token,method:"GET",data:{page:e.page,keywords:e.keywords},dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){var o=[];e.page_count=a.data.data.page_count;var n=a.data.data.list;for(var i in n)o.push({id:n[i].id,avatar:n[i].avatar_url,name:n[i].nickname,title:n[i].title,time:n[i].addtime,num:n[i].read_count,sign:n[i].type,maters:n[i].cover_pic[0]});e.photo_list=e.photo_list.concat(o),t.hideLoading(),console.log(e.photo_list," at pages\\mater\\mater.vue:420")},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}})}else{if(e.page_id==e.page_movie_count)return t.showToast({title:"没有更多数据了",icon:"none"}),!1;t.showLoading({title:"加载中"}),e.page_id=parseInt(e.page_id)+parseInt(1),t.request({url:e.$api+"default/movies-list&access_token="+e.$access_token,method:"GET",data:{page:e.page_id,keywords:e.keywords_video},dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){var o=[],n=a.data.data.list;a.data.data.page_count;for(var i in n)o.push({id:n[i].id,poster:n[i].cove_pic,avatar:n[i].avatar_url,title:n[i].title,look:n[i].num,video:n[i].url});e.video_list=e.video_list.concat(o),console.log(e.video_list," at pages\\mater\\mater.vue:465"),t.hideLoading()},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}})}}};e.default=n}).call(this,a("6e42")["default"])},"9f7e":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return n})},b4a6:function(t,e,a){"use strict";var o=a("890c"),n=a.n(o);n.a},d4c7:function(t,e,a){"use strict";a.r(e);var o=a("9337"),n=a.n(o);for(var i in o)"default"!==i&&function(t){a.d(e,t,function(){return o[t]})}(i);e["default"]=n.a}},[["59ee","common/runtime","common/vendor"]]]);