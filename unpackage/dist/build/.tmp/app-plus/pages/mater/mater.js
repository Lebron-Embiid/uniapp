(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mater/mater"],{"177a":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(a("5238"));function i(t){return t&&t.__esModule?t:{default:t}}var s={data:function(){return{navbar:[{name:"图片"},{name:"视频"}],currentTab:0,photo_list:[],video_list:[],page:1,page_id:1,page_source_count:1,page_movie_count:1,keywords:"",keywords_video:""}},components:{commonVideo:o.default},methods:{navbarTap:function(e){var a=this;a.currentTab=e,a.page=1,a.page_id=1,a.page_source_count=1,a.page_movie_count=1,t.startPullDownRefresh(),0==a.currentTab?t.request({url:a.$api+"default/source-list&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[],o=t.data.data;for(var i in o.list)e.push({id:o.list[i].id,avatar:o.list[i].avatar_url,name:o.list[i].nickname,title:o.list[i].title,time:o.list[i].addtime,num:o.list[i].read_count,sign:o.list[i].type,maters:o.list[i].cover_pic[0]});a.page_source_count=t.data.data.page_count,a.photo_list=e},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}}):t.request({url:a.$api+"default/movies-list&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[],o=t.data.data.list;t.data.data.page_count;for(var i in o)e.push({id:o[i].id,poster:o[i].cove_pic,avatar:o[i].avatar_url,title:o[i].title,look:o[i].num,video:o[i].url});a.page_movie_count=t.data.data.page_count,a.video_list=e},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}})},toPreviewMater:function(e,a){var o=this,i=[];for(var s in o.photo_list[e].maters)i.push(o.photo_list[e].maters[s].cover_pic);t.previewImage({urls:i,current:i[a],indicator:"number"})},toMaterDetail:function(e){t.navigateTo({url:"/pages/mater_detail/mater_detail?id="+e.id+"&sign="+e.sign})},toSearch:function(e){var a=this;a.page=1,t.request({url:a.$api+"default/source-list&access_token="+a.$access_token,method:"GET",dataType:"json",data:{keyword:a.keywords},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[];console.log(222);var o=t.data.data;for(var i in console.log(o),o.list)e.push({id:o.list[i].id,avatar:o.list[i].avatar_url,name:o.list[i].nickname,time:o.list[i].addtime,num:o.list[i].read_count,sign:o.list[i].type,maters:o.list[i].cover_pic[0]});a.page_source_count=t.data.data.page_count,a.photo_list=e},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}})},toSearch_video:function(e){var a=this;a.page_id=1,t.request({url:a.$api+"default/movies-list&access_token="+a.$access_token,method:"GET",dataType:"json",data:{keyword:a.keywords_video},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[],o=t.data.data.list;t.data.data.page_count;for(var i in o)e.push({id:o[i].id,poster:o[i].cove_pic,avatar:o[i].avatar_url,title:o[i].title,look:o[i].num,video:o[i].url});a.page_movie_count=t.data.data.page_count,a.video_list=e},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}})}},onNavigationBarButtonTap:function(){0==this.currentTab?t.navigateTo({url:"/pages/release_mater/release_mater"}):t.navigateTo({url:"/pages/release_video/release_video"})},onShow:function(){var e=this;if(e.$user_name=t.getStorageSync("user_name"),""==e.$user_name)return t.showToast({title:"请完善代理商资料！",icon:"none",duration:2e3}),setTimeout(function(){t.navigateTo({url:"/pages/complete_mater/complete_mater"})},2e3),!1},onLoad:function(e){var a=this;a.$access_token=t.getStorageSync("access_token"),a.$level=t.getStorageSync("level"),t.showLoading({title:"加载中"}),t.request({url:a.$api+"default/source-list&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){var o=[],i=e.data.data;for(var s in console.log(i),i.list)o.push({id:i.list[s].id,avatar:i.list[s].avatar_url,name:i.list[s].nickname,title:i.list[s].title,time:i.list[s].addtime,num:i.list[s].read_count,sign:i.list[s].type,maters:i.list[s].cover_pic[0]});a.page_source_count=e.data.data.page_count,a.photo_list=o,t.hideLoading()},fail:function(e){t.hideLoading(),t.showToast({title:e.data.msg,icon:"none"})}}),t.startPullDownRefresh()},onPullDownRefresh:function(){var e=this;e.page=1,e.page_id=1,e.keywords="",e.keywords_video="",t.showLoading({title:"加载中"}),setTimeout(function(){0==e.currentTab?t.request({url:e.$api+"default/source-list&access_token="+e.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){var o=[],i=a.data.data;for(var s in console.log(i),i.list)o.push({id:i.list[s].id,avatar:i.list[s].avatar_url,name:i.list[s].nickname,title:i.list[s].title,time:i.list[s].addtime,num:i.list[s].read_count,sign:i.list[s].type,maters:i.list[s].cover_pic[0]});e.page_source_count=a.data.data.page_count,e.photo_list=o,t.hideLoading()},fail:function(e){t.hideLoading(),t.showToast({title:e.data.msg,icon:"none"})}}):t.request({url:e.$api+"default/movies-list&access_token="+e.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){var o=[],i=a.data.data.list;a.data.data.page_count;for(var s in i)o.push({id:i[s].id,poster:i[s].cove_pic,avatar:i[s].avatar_url,title:i[s].title,look:i[s].num,video:i[s].url});e.page_movie_count=a.data.data.page_count,e.video_list=o,t.hideLoading(),console.log(e.video_list)},fail:function(e){t.hideLoading(),t.showToast({title:e.data.msg,icon:"none"})}}),t.stopPullDownRefresh()},1e3)},onReachBottom:function(){var e=this;if(0==e.currentTab){if(e.page==e.page_source_count)return t.showToast({title:"没有更多数据了",icon:"none"}),!1;t.showLoading({title:"加载中"}),e.page=parseInt(e.page)+parseInt(1),t.request({url:e.$api+"default/source-list&access_token="+e.$access_token,method:"GET",data:{page:e.page,keywords:e.keywords},dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){var o=[];e.page_count=a.data.data.page_count;var i=a.data.data.list;for(var s in i)o.push({id:i[s].id,avatar:i[s].avatar_url,name:i[s].nickname,title:i[s].title,time:i[s].addtime,num:i[s].read_count,sign:i[s].type,maters:i[s].cover_pic[0]});e.photo_list=e.photo_list.concat(o),t.hideLoading()},fail:function(e){t.hideLoading(),t.showToast({title:e.data.msg,icon:"none"})}})}else{if(e.page_id==e.page_movie_count)return t.showToast({title:"没有更多数据了",icon:"none"}),!1;t.showLoading({title:"加载中"}),e.page_id=parseInt(e.page_id)+parseInt(1),t.request({url:e.$api+"default/movies-list&access_token="+e.$access_token,method:"GET",data:{page:e.page_id,keywords:e.keywords_video},dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){var o=[],i=a.data.data.list;a.data.data.page_count;for(var s in i)o.push({id:i[s].id,poster:i[s].cove_pic,avatar:i[s].avatar_url,title:i[s].title,look:i[s].num,video:i[s].url});e.video_list=e.video_list.concat(o),console.log(e.video_list),t.hideLoading()},fail:function(e){t.hideLoading(),t.showToast({title:e.data.msg,icon:"none"})}})}}};e.default=s}).call(this,a("6e42")["default"])},"59ee":function(t,e,a){"use strict";a("1a7f");var o=s(a("b0ce")),i=s(a("5b48"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,o.default)(i.default))},"5b48":function(t,e,a){"use strict";a.r(e);var o=a("b9b3"),i=a("d4c7");for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);a("e31b");var n=a("2877"),r=Object(n["a"])(i["default"],o["a"],o["b"],!1,null,"6145b540",null);e["default"]=r.exports},a8ae:function(t,e,a){},b9b3:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"mater_box"},[a("view",{staticClass:"page_bg"}),a("view",{staticClass:"list_nav"},t._l(t.navbar,function(e,o){return a("view",{key:o,class:[t.currentTab==o?"active":""],attrs:{eventid:"2a046227-0-"+o},on:{click:function(e){t.navbarTap(o)}}},[t._v(t._s(e.name))])})),a("view",{staticClass:"mt44"}),a("view",{directives:[{name:"show",rawName:"v-show",value:0==t.currentTab,expression:"currentTab == 0"}],staticClass:"photo_mater"},[a("form",{staticClass:"form_box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords,expression:"keywords"}],attrs:{type:"text",placeholder:"请输入您要搜索的关键词",value:t.keywords,eventid:"2a046227-1"},domProps:{value:t.keywords},on:{input:function(e){e.target.composing||(t.keywords=e.target.value)}}}),a("button",{attrs:{eventid:"2a046227-2"},on:{click:t.toSearch}},[a("image",{attrs:{src:"../../static/search.png",mode:""}})])],1),a("view",{staticClass:"photo_box"},t._l(t.photo_list,function(e,o){return a("view",{key:o,staticClass:"photo_item",attrs:{eventid:"2a046227-3-"+o},on:{click:function(a){t.toMaterDetail(e)}}},[a("view",{staticClass:"photo_head"},[a("image",{staticClass:"avatar_img",attrs:{src:e.avatar,mode:"widthFix"}}),a("text",{staticClass:"ph_name"},[t._v(t._s(e.name))]),a("text",{staticClass:"ph_txt"},[t._v(t._s(e.time))]),a("text",{staticClass:"ph_txt"},[t._v("浏览："+t._s(e.num))]),1==e.sign?a("block",[a("text",{staticClass:"ph_sign"},[t._v("精选")])]):t._e()],1),a("view",{staticClass:"pc_title"},[t._v(t._s(e.title))]),a("view",{staticClass:"photo_content"},t._l(e.maters,function(t,e){return a("view",{key:e,staticClass:"pc_item"},[a("image",{staticClass:"c_img",attrs:{src:t.cover_pic,"lazy-load":"true",mode:"aspectFill"}})])}))])}))],1),a("view",{directives:[{name:"show",rawName:"v-show",value:1==t.currentTab,expression:"currentTab == 1"}],staticClass:"video_mater"},[a("form",{staticClass:"form_box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords_video,expression:"keywords_video"}],attrs:{type:"text",placeholder:"请输入您要搜索的关键词",value:t.keywords_video,eventid:"2a046227-4"},domProps:{value:t.keywords_video},on:{input:function(e){e.target.composing||(t.keywords_video=e.target.value)}}}),a("button",{attrs:{eventid:"2a046227-5"},on:{click:t.toSearch_video}},[a("image",{attrs:{src:"../../static/search.png",mode:""}})])],1),a("view",{staticClass:"video_content"},[a("commonVideo",{attrs:{video_list:t.video_list,istype:1,isDownload:1,mpcomid:"2a046227-0"}})],1)],1)])},i=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return i})},d4c7:function(t,e,a){"use strict";a.r(e);var o=a("177a"),i=a.n(o);for(var s in o)"default"!==s&&function(t){a.d(e,t,function(){return o[t]})}(s);e["default"]=i.a},e31b:function(t,e,a){"use strict";var o=a("a8ae"),i=a.n(o);i.a}},[["59ee","common/runtime","common/vendor"]]]);