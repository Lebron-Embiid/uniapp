(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mater/mater"],{"04f0":function(t,e,a){},1531:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return n})},"1cf7":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){return a.e("components/common-video").then(a.bind(null,"5238"))},n={data:function(){return{navbar:[{name:"图片"},{name:"视频"}],currentTab:0,photo_list:[],video_list:[],page:1,page_id:1,page_source_count:1,page_movie_count:1}},components:{commonVideo:o},methods:{navbarTap:function(e){var a=this;a.currentTab=e,t.startPullDownRefresh(),0==a.currentTab?t.request({url:a.$api+"default/source-list&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[],o=t.data.data;for(var n in o.list)e.push({id:o.list[n].id,avatar:o.list[n].avatar_url,name:o.list[n].nickname,time:o.list[n].addtime,num:o.list[n].read_count,sign:o.list[n].type,maters:o.list[n].cover_pic[0]});a.page_source_count=t.data.data.page_count,a.photo_list=e},fail:function(){t.showToast({title:res.data.msg,icon:"none"})}}):t.request({url:a.$api+"default/movies-list&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[],o=t.data.data.list;t.data.data.page_count;for(var n in o)e.push({id:o[n].id,poster:o[n].cove_pic,avatar:o[n].avatar_url,title:o[n].title,look:o[n].num,video:o[n].url});a.page_movie_count=t.data.data.page_count,a.video_list=e},fail:function(){t.showToast({title:res.data.msg,icon:"none"})}})},toPreviewMater:function(e,a){var o=this,n=[];for(var i in o.photo_list[e].maters)n.push(o.photo_list[e].maters[i].cover_pic);t.previewImage({urls:n,current:n[a],indicator:"number"})},toMaterDetail:function(e){t.navigateTo({url:"/pages/mater_detail/mater_detail?id="+e.id+"&sign="+e.sign})},toSearch:function(e){t.navigateTo({url:"/pages/search/search"})}},onNavigationBarButtonTap:function(){0==this.currentTab?t.navigateTo({url:"/pages/release_mater/release_mater"}):t.navigateTo({url:"/pages/release_video/release_video"})},onLoad:function(e){var a=this;a.$access_token=t.getStorageSync("access_token"),a.$level=t.getStorageSync("level"),setTimeout(function(){t.request({url:a.$api+"default/source-list&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[],o=t.data.data;for(var n in o.list)e.push({id:o.list[n].id,avatar:o.list[n].avatar_url,name:o.list[n].nickname,time:o.list[n].addtime,num:o.list[n].read_count,sign:o.list[n].type,maters:o.list[n].cover_pic[0]});a.page_source_count=t.data.data.page_count,a.photo_list=e},fail:function(){t.showToast({title:res.data.msg,icon:"none"})}})},1e3),t.startPullDownRefresh()},onPullDownRefresh:function(){var e=this;setTimeout(function(){0==e.currentTab?t.request({url:e.$api+"default/source-list&access_token="+e.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var a=[],o=t.data.data;for(var n in o.list)a.push({id:o.list[n].id,avatar:o.list[n].avatar_url,name:o.list[n].nickname,time:o.list[n].addtime,num:o.list[n].read_count,sign:o.list[n].type,maters:o.list[n].cover_pic[0]});e.page_source_count=t.data.data.page_count,e.photo_list=a},fail:function(){t.showToast({title:res.data.msg,icon:"none"})}}):t.request({url:e.$api+"default/movies-list&access_token="+e.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var a=[],o=t.data.data.list;t.data.data.page_count;for(var n in o)a.push({id:o[n].id,poster:o[n].cove_pic,avatar:o[n].avatar_url,title:o[n].title,look:o[n].num,video:o[n].url});e.page_movie_count=t.data.data.page_count,e.video_list=a},fail:function(){t.showToast({title:res.data.msg,icon:"none"})}}),t.stopPullDownRefresh()},1e3)},onReachBottom:function(){var e=this;if(console.log(e.currentTab," at pages\\mater\\mater.vue:279"),0==e.currentTab){if(e.page==e.page_source_count)return t.showToast({title:"没有更多数据了",icon:"none"}),!1;e.page=parseInt(e.page)+parseInt(1),t.request({url:e.$api+"default/source-list&access_token="+e.$access_token,method:"GET",data:{page:e.page},dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var a=[];e.page_count=t.data.data.page_count;var o=t.data.data.list;for(var n in o)a.push({id:o[n].id,avatar:o[n].avatar_url,name:o[n].nickname,time:o[n].addtime,num:o[n].read_count,sign:o[n].type,maters:o[n].cover_pic[0]});e.photo_list=e.photo_list.concat(a),console.log(e.photo_list," at pages\\mater\\mater.vue:313")},fail:function(){t.showToast({title:res.data.msg,icon:"none"})}})}else{if(console.log(e.page_id," at pages\\mater\\mater.vue:323"),console.log(e.page_movie_count," at pages\\mater\\mater.vue:324"),e.page_id==e.page_movie_count)return t.showToast({title:"没有更多数据了",icon:"none"}),!1;e.page_id=parseInt(e.page_id)+parseInt(1),t.request({url:e.$api+"default/movies-list&access_token="+e.$access_token,method:"GET",data:{page:e.page_id},dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var a=[],o=t.data.data.list;t.data.data.page_count;for(var n in o)a.push({poster:o[n].cove_pic,avatar:o[n].avatar_url,title:o[n].title,look:o[n].num,video:o[n].url});e.video_list=e.video_list.concat(a),console.log(e.video_list," at pages\\mater\\mater.vue:356")},fail:function(){t.showToast({title:res.data.msg,icon:"none"})}})}}};e.default=n}).call(this,a("6e42")["default"])},"5b48":function(t,e,a){"use strict";a.r(e);var o=a("1531"),n=a("d4c7");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("6711");var s=a("2877"),r=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,"f282d6e8",null);e["default"]=r.exports},6711:function(t,e,a){"use strict";var o=a("04f0"),n=a.n(o);n.a},d4c7:function(t,e,a){"use strict";a.r(e);var o=a("1cf7"),n=a.n(o);for(var i in o)"default"!==i&&function(t){a.d(e,t,function(){return o[t]})}(i);e["default"]=n.a}},[["59ee","common/runtime","common/vendor"]]]);