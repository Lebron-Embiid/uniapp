(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/store/store"],{"0627":function(t,e,a){"use strict";a.r(e);var n=a("3d04"),i=a("a60d");for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);a("cf0d");var o=a("2877"),c=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"446cb25e",null);e["default"]=c.exports},"126f":function(t,e,a){"use strict";a("1a7f");var n=s(a("b0ce")),i=s(a("0627"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(i.default))},"36e2":function(t,e,a){"use strict";var n=a("937b"),i=a.n(n);i.a},"3d04":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"store_box"},[a("view",{staticClass:"index_swiper"},[a("view",{staticClass:"search_top",attrs:{eventid:"7a9930cf-0"},on:{click:t.toSearch}},[a("text",[t._v("请输入您要搜索的关键词")]),a("image",{attrs:{src:"../../static/search.png",mode:"widthFix"}})]),a("commonSwiper",{attrs:{swiperList:t.swiperList,mpcomid:"7a9930cf-0"}})],1),a("view",{staticClass:"store_content"},[a("view",{staticClass:"store_nav"},t._l(t.navbar,function(e,n){return a("view",{key:n,staticClass:"nav",class:[t.currentTab==e.id?"active":""],attrs:{eventid:"7a9930cf-1-"+n},on:{click:function(a){t.navbarTap(e.id)}}},[t._v(t._s(e.name))])})),a("view",{staticClass:"store_list"},[a("commonStore",{attrs:{storeList:t.storeList,mpcomid:"7a9930cf-1"}})],1)]),a("view",{staticClass:"contact_customer",attrs:{eventid:"7a9930cf-2"},on:{tap:function(e){e.stopPropagation(),t.toContact(e)}}},[a("image",{attrs:{src:"../../static/kefu.png",mode:"widthFix"}})])])},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},"56a5":function(t,e,a){"use strict";a.r(e);var n=a("a989"),i=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);e["default"]=i.a},"5e44":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(a("b505")),i=s(a("ff75"));function s(t){return t&&t.__esModule?t:{default:t}}var o={data:function(){return{page_count1:1,page1:1,page_count2:1,page2:1,page_count3:1,page3:1,swiperList:[],scrollLeft:0,tabIndex:0,navbar:[],currentTab:3,cat:[],storeList:[]}},components:{commonSwiper:n.default,commonStore:i.default},methods:{toContact:function(){t.navigateTo({url:"/pages/feedback/feedback"})},navbarTap:function(e){var a=this;a.currentTab=e,a.page_count1=1,a.page_count2=1,a.page_count3=1,a.page1=1,a.page2=1,a.page3=1,t.startPullDownRefresh(),t.request({url:a.$api+"default/goods-list&cat_id="+e+"&access_token="+a.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=[],n=t.data.data;for(var i in n.list)e.push({id:n.list[i].id,src:n.list[i].pic_url,cat_id:n.list[i].cat_id,title:n.list[i].name,price:n.list[i].original_price,type:n.list[i].weight,sales:n.list[i].sales});a.storeList=e,1==a.currentTab?a.page_count1=t.data.data.page_count:2==a.currentTab?a.page_count2=t.data.data.page_count:3==a.currentTab&&(a.page_count3=t.data.data.page_count),console.log(a.page_count1),console.log(a.page_count2),console.log(a.page_count3)},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}})},toSearch:function(e){t.navigateTo({url:"/pages/search/search"})}},onShow:function(){var e=this;if(e.$user_name=t.getStorageSync("user_name"),""==e.$user_name)return t.showToast({title:"请完善代理商资料！",icon:"none",duration:2e3}),setTimeout(function(){t.navigateTo({url:"/pages/complete_mater/complete_mater"})},2e3),!1},onLoad:function(e){var a=this;a.$access_token=t.getStorageSync("access_token"),a.$level=t.getStorageSync("level"),console.log(a.$access_token,a.$level),t.showLoading({title:"加载中"}),t.request({url:a.$api+"default/shop&cat_id="+a.currentTab+"&access_token="+a.$access_token,dataType:"json",method:"GET",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){var n=[],i=[],s=[],o=e.data.data;for(var c in o.cat)n.push({id:o.cat[c].id,name:o.cat[c].name});for(var r in o.list)s.push({id:o.list[r].id,src:o.list[r].pic_url,title:o.list[r].name,cat_id:o.list[r].cat_id,price:o.list[r].original_price,type:o.list[r].weight,sales:o.list[r].sales});for(var u in o.shop_banner)i.push(o.shop_banner[u].pic_url);a.page_count1=e.data.data.page_count,a.navbar=n,a.storeList=s,a.swiperList=i,t.hideLoading()},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}}),t.startPullDownRefresh()},onPullDownRefresh:function(){var e=this;e.page_count1=1,e.page_count2=1,e.page_count3=1,e.page1=1,e.page2=1,e.page3=1,t.showLoading({title:"加载中"}),setTimeout(function(){t.request({url:e.$api+"default/goods-list&cat_id="+e.currentTab+"&access_token="+e.$access_token,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){var n=[],i=a.data.data;for(var s in i.list)n.push({id:i.list[s].id,src:i.list[s].pic_url,cat_id:i.list[s].cat_id,title:i.list[s].name,price:i.list[s].original_price,type:i.list[s].weight,sales:i.list[s].sales});e.storeList=n,1==e.currentTab?e.page_count1=a.data.data.page_count:2==e.currentTab?e.page_count2=a.data.data.page_count:3==e.currentTab&&(e.page_count3=a.data.data.page_count),t.hideLoading()},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}}),t.stopPullDownRefresh()},1e3)},onReachBottom:function(){var e=this;if(1==e.currentTab){if(e.page1==e.page_count1)return t.showToast({title:"没有更多数据了",icon:"none"}),!1;e.page1=parseInt(e.page1)+parseInt(1);var a=e.page1}else if(2==e.currentTab){if(e.page2==e.page_count2)return t.showToast({title:"没有更多数据了",icon:"none"}),!1;e.page2=parseInt(e.page2)+parseInt(1);a=e.page2}else if(3==e.currentTab){if(e.page3==e.page_count3)return t.showToast({title:"没有更多数据了",icon:"none"}),!1;e.page3=parseInt(e.page3)+parseInt(1);a=e.page3}t.showLoading({title:"加载中"}),t.request({url:e.$api+"default/goods-list&cat_id="+e.currentTab+"&access_token="+e.$access_token,method:"GET",data:{page:a},success:function(a){var n=[],i=a.data.data.list;for(var s in i)n.push({id:i[s].id,src:i[s].pic_url,title:i[s].name,cat_id:i[s].cat_id,price:i[s].original_price,type:i[s].weight,sales:i[s].sales});e.storeList=e.storeList.concat(n),t.hideLoading()},fail:function(e){t.showToast({icon:"none",title:e.data.msg,duration:2e3})}})}};e.default=o}).call(this,a("6e42")["default"])},"937b":function(t,e,a){},a60d:function(t,e,a){"use strict";a.r(e);var n=a("5e44"),i=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);e["default"]=i.a},a989:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{}},props:{storeList:Array},methods:{toStoreDetail:function(e){var a=this;return a.$level=t.getStorageSync("level"),4==a.$level?(t.navigateTo({url:"/pages/store_detail/store_detail?id="+e.id}),!1):e.cat_id!=a.$level&&3!=e.cat_id?(t.showToast({title:"你不是此商品的代理，没有权限购买",icon:"none"}),!1):void t.navigateTo({url:"/pages/store_detail/store_detail?id="+e.id})}}};e.default=a}).call(this,a("6e42")["default"])},c0d9:function(t,e,a){},cf0d:function(t,e,a){"use strict";var n=a("c0d9"),i=a.n(n);i.a},d06f:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"common_store"},t._l(t.storeList,function(e,n){return a("view",{key:n,staticClass:"store_item",attrs:{eventid:"534133ff-0-"+n},on:{click:function(a){t.toStoreDetail(e)}}},[a("image",{attrs:{src:e.src,"lazy-load":"true",mode:"aspectFit"}}),a("view",{staticClass:"si_title"},[t._v(t._s(e.title))]),a("view",{staticClass:"si_info"},[t._v(t._s(e.info))]),a("view",{staticClass:"si_price"},[t._v("￥"+t._s(e.price)),a("text",[t._v("已售："+t._s(e.sales))])])])}))},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},ff75:function(t,e,a){"use strict";a.r(e);var n=a("d06f"),i=a("56a5");for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);a("36e2");var o=a("2877"),c=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"5d7039e8",null);e["default"]=c.exports}},[["126f","common/runtime","common/vendor"]]]);