(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mater_detail/mater_detail"],{"0227":function(t,e,o){"use strict";var a=o("38c1"),n=o.n(a);n.a},3277:function(t,e,o){"use strict";o("1a7f");var a=i(o("b0ce")),n=i(o("7b99"));function i(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(n.default))},"38c1":function(t,e,o){},7365:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",{staticClass:"mater_detail"},[o("view",{staticClass:"page_bg"}),o("view",{staticClass:"photo_head"},[o("image",{staticClass:"avatar_img",attrs:{src:t.avatar,mode:"widthFix"}}),o("text",{staticClass:"ph_name"},[t._v(t._s(t.name))]),o("text",{staticClass:"ph_txt"},[t._v(t._s(t.time))]),o("text",{staticClass:"ph_txt"},[t._v("浏览人数："+t._s(t.num))]),1==t.sign?o("block",[o("text",{staticClass:"ph_sign"},[t._v("精选")])]):t._e()],1),o("view",{staticClass:"md_title"},[t._v(t._s(t.title))]),o("view",{staticClass:"photo_content"},t._l(t.maters,function(e,a){return o("view",{key:a,staticClass:"pc_item",attrs:{eventid:"2213ac2b-0-"+a},on:{click:function(e){t.downloadMater(a)}}},[o("image",{staticClass:"c_img",attrs:{src:e.cover_pic,"lazy-load":"true",mode:"widthFix"}}),o("image",{staticClass:"download_icon",attrs:{src:"../../static/download.png",mode:"widthFix"}})])})),o("view",{staticClass:"photo_bottom"},[o("view",{staticClass:"pb_share",attrs:{eventid:"2213ac2b-1"},on:{click:t.toShare}},[o("image",{attrs:{src:"../../static/share.png",mode:"widthFix"}}),t._v("一键转发")])])])},n=[];o.d(e,"a",function(){return a}),o.d(e,"b",function(){return n})},"7b99":function(t,e,o){"use strict";o.r(e);var a=o("7365"),n=o("95ec");for(var i in n)"default"!==i&&function(t){o.d(e,t,function(){return n[t]})}(i);o("0227");var s=o("2877"),c=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"20d06d46",null);e["default"]=c.exports},"95ec":function(t,e,o){"use strict";o.r(e);var a=o("cf29"),n=o.n(a);for(var i in a)"default"!==i&&function(t){o.d(e,t,function(){return a[t]})}(i);e["default"]=n.a},cf29:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{avatar:"",name:"",time:"",num:"",title:"",sign:"",maters:[],providerList:[]}},methods:{initProvider:function(){var e=this,o=["weixin"];t.getProvider({service:"share",success:function(t){if(t.provider&&t.provider.length)for(var a=0;a<t.provider.length;a++)~o.indexOf(t.provider[a])&&e.providerList.push({value:t.provider[a]})},fail:function(t){console.error("获取服务供应商失败："+JSON.stringify(t))}})},toShare:function(){var e=this;t.showLoading({title:"下载中"});for(var o=e.maters.length,a=function(a){t.downloadFile({url:e.maters[a].cover_pic,success:function(n){200===n.statusCode&&(console.log(n.tempFilePath),t.saveImageToPhotosAlbum({filePath:n.tempFilePath,success:function(){var n=a+1;n==o&&(t.setClipboardData({data:e.title}),t.showModal({title:"去微信或朋友圈分享",content:"文字已复制，图片已下载到手机！",confirmText:"打开微信",success:function(e){e.confirm&&("Android"==plus.os.name?(console.log(plus.os.name),plus.runtime.launchApplication({pname:"com.tencent.mm"},function(t){console.log("Open system default browser failed: "+t.message)})):"iOS"==plus.os.name&&(console.log(plus.os.name),plus.runtime.launchApplication({action:"weixin://"},function(t){console.log("Open system default browser failed: "+t.message)}))),t.hideLoading()},fail:function(t){console.log(t)}}))},fail:function(){t.showToast({title:"下载失败！",icon:"none",duration:1500})}}))},fail:function(){t.hideLoading(),t.showToast({title:"下载失败！",icon:"none",duration:1500})}})},n=0;n<o;n++)a(n);console.log(plus.os.name)},downloadMater:function(e){var o=this;console.log(o.maters[e]),t.showModal({title:"提示",content:"确定下载该图片？",success:function(a){a.confirm&&(t.showLoading({title:"下载中"}),t.request({url:o.$api+"user/order-source&access_token="+o.$access_token,method:"POST",data:{tip:o.maters[e].id,url:o.maters[e].cover_pic,status:0},dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){var n=a.data;0==n.code?(console.log(o.maters[e].cover_pic),t.downloadFile({url:o.maters[e].cover_pic,success:function(e){200===e.statusCode&&(console.log(e.tempFilePath),t.saveImageToPhotosAlbum({filePath:e.tempFilePath,success:function(){t.hideLoading(),t.showToast({title:"下载成功",icon:"none",duration:1500})}}))},fail:function(){t.hideLoading(),t.showToast({title:"下载失败！",icon:"none",duration:1500})}})):(t.hideLoading(),t.showToast({title:n.msg,icon:"none"}))},fail:function(e){t.hideLoading(),t.showToast({title:e.data.msg,icon:"none"})}}))},fail:function(t){console.log(t)}})}},onNavigationBarButtonTap:function(){t.navigateTo({url:"/pages/release_mater/release_mater"})},onReady:function(){this.initProvider()},onLoad:function(e){var o=this;o.$access_token=t.getStorageSync("access_token"),o.$level=t.getStorageSync("level"),t.request({url:o.$api+"default/source-detail&access_token="+o.$access_token+"&id="+e.id,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=t.data.data;o.avatar=e.source.avatar_url,o.title=e.source.title,o.name=e.source.username,o.time=e.source.addtime,o.num=e.source.browse_id,o.sign=e.source.type,o.maters=e.topic},fail:function(e){t.showToast({title:e.data.msg,icon:"none"})}})}};e.default=o}).call(this,o("6e42")["default"])}},[["3277","common/runtime","common/vendor"]]]);